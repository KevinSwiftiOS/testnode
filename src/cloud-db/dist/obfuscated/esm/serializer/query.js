const a41_0x3a94f2=a41_0xc454;function a41_0xc454(_0x1ed731,_0x9e8a8e){const _0x2a82a9=a41_0x2a82();return a41_0xc454=function(_0xc45451,_0x1b3fae){_0xc45451=_0xc45451-0x1a4;let _0xbf6c17=_0x2a82a9[_0xc45451];return _0xbf6c17;},a41_0xc454(_0x1ed731,_0x9e8a8e);}(function(_0x5df87d,_0x469ab2){const _0x4f29e9=a41_0xc454,_0x5a0533=_0x5df87d();while(!![]){try{const _0x876c75=-parseInt(_0x4f29e9(0x1c2))/0x1+-parseInt(_0x4f29e9(0x1af))/0x2*(-parseInt(_0x4f29e9(0x1b5))/0x3)+-parseInt(_0x4f29e9(0x1b6))/0x4*(-parseInt(_0x4f29e9(0x1ab))/0x5)+parseInt(_0x4f29e9(0x1bd))/0x6*(-parseInt(_0x4f29e9(0x1c4))/0x7)+-parseInt(_0x4f29e9(0x1b2))/0x8*(-parseInt(_0x4f29e9(0x1a6))/0x9)+-parseInt(_0x4f29e9(0x1ad))/0xa+parseInt(_0x4f29e9(0x1a8))/0xb*(parseInt(_0x4f29e9(0x1aa))/0xc);if(_0x876c75===_0x469ab2)break;else _0x5a0533['push'](_0x5a0533['shift']());}catch(_0x133e76){_0x5a0533['push'](_0x5a0533['shift']());}}}(a41_0x2a82,0xc4918));import{isLogicCommand,LOGIC_COMMANDS_LITERAL}from'../commands/logic';import{isComparisonCommand,isQueryCommand,QUERY_COMMANDS_LITERAL}from'../commands/query';import{DataBaseError,ErrorMsg,ERRORS}from'../Errors';import{operatorToString}from'../operator-map';import{SYMBOL_UNSET_FIELD_NAME}from'../Symbols';import{isArray,isObject}from'../typings';import{stringifyByEJSON}from'../util';import{encodeInternalDataType,flattenQueryObject,isConversionRequired}from'./common';export const QuerySerializer={'encodeEJSON'(_0x1b4dc6){const _0x45eee6=a41_0xc454,_0x11ada6=new QueryEncoder();return stringifyByEJSON(_0x11ada6[_0x45eee6(0x1c7)](_0x1b4dc6));}};function a41_0x2a82(){const _0x1672e9=['5iaiDbG','encodeComparisonCommand','8548190ADsARr','NOR','25070pQNChB','fieldName','keys','664iHipNW','bind','assign','336stLJoG','3336548JUorXV','mergeConditionAfterEncode','NIN','encodeLogicCommand','operator','map','operands','654fcaWEL','AND','common','encodeQueryCommand','ALL','325366GgfPBO','INVALID_PARAM','103166ScmSgd','encodeQueryObject','LTE','encodeQuery','NEQ','length','132867tFjZvr','UNSET_FIELD_ERROR','11sTYGuX','GTE','1540620gbPVVz'];a41_0x2a82=function(){return _0x1672e9;};return a41_0x2a82();}export class QueryEncoder{[a41_0x3a94f2(0x1c7)](_0x567f64,_0x327788){const _0x303285=a41_0x3a94f2;if(isConversionRequired(_0x567f64)){if(isLogicCommand(_0x567f64))return this[_0x303285(0x1b9)](_0x567f64);if(isQueryCommand(_0x567f64))return this['encodeQueryCommand'](_0x567f64);}if(isObject(_0x567f64))return this[_0x303285(0x1c5)](_0x567f64);return _0x567f64;}['encodeLogicCommand'](_0x1c839a){const _0x30855d=a41_0x3a94f2;switch(_0x1c839a[_0x30855d(0x1ba)]){case LOGIC_COMMANDS_LITERAL[_0x30855d(0x1ae)]:case LOGIC_COMMANDS_LITERAL[_0x30855d(0x1be)]:case LOGIC_COMMANDS_LITERAL['OR']:{const _0xee078a=operatorToString(_0x1c839a[_0x30855d(0x1ba)]),_0x24008b=_0x1c839a[_0x30855d(0x1bc)][_0x30855d(0x1bb)](_0x793c03=>this[_0x30855d(0x1c7)](_0x793c03,_0x1c839a[_0x30855d(0x1b0)]));return{[_0xee078a]:_0x24008b};}default:{const _0x468d3d=operatorToString(_0x1c839a['operator']);if(_0x1c839a['operands'][_0x30855d(0x1a5)]===0x1){const _0x41ad4e=this[_0x30855d(0x1c7)](_0x1c839a['operands'][0x0]);return{[_0x468d3d]:_0x41ad4e};}const _0x10a08b=_0x1c839a['operands'][_0x30855d(0x1bb)](this[_0x30855d(0x1c7)][_0x30855d(0x1b3)](this));return{[_0x468d3d]:_0x10a08b};}}}[a41_0x3a94f2(0x1c0)](_0x400ba6){const _0x5ca9df=a41_0x3a94f2;return this[_0x5ca9df(0x1ac)](_0x400ba6);}[a41_0x3a94f2(0x1ac)](_0x2e77cc){const _0x4f9aac=a41_0x3a94f2;if(_0x2e77cc['fieldName']===SYMBOL_UNSET_FIELD_NAME)throw new DataBaseError(Object['assign'](Object[_0x4f9aac(0x1b4)]({},ERRORS[_0x4f9aac(0x1c3)]),{'errMsg':ErrorMsg[_0x4f9aac(0x1bf)][_0x4f9aac(0x1a7)]}));const _0x5ac477=operatorToString(_0x2e77cc[_0x4f9aac(0x1ba)]);switch(_0x2e77cc[_0x4f9aac(0x1ba)]){case QUERY_COMMANDS_LITERAL['EQ']:case QUERY_COMMANDS_LITERAL[_0x4f9aac(0x1a4)]:case QUERY_COMMANDS_LITERAL['LT']:case QUERY_COMMANDS_LITERAL[_0x4f9aac(0x1c6)]:case QUERY_COMMANDS_LITERAL['GT']:case QUERY_COMMANDS_LITERAL[_0x4f9aac(0x1a9)]:{return{[_0x2e77cc[_0x4f9aac(0x1b0)]]:{[_0x5ac477]:encodeInternalDataType(_0x2e77cc['operands'][0x0])}};}case QUERY_COMMANDS_LITERAL['IN']:case QUERY_COMMANDS_LITERAL[_0x4f9aac(0x1b8)]:case QUERY_COMMANDS_LITERAL[_0x4f9aac(0x1c1)]:{return{[_0x2e77cc[_0x4f9aac(0x1b0)]]:{[_0x5ac477]:encodeInternalDataType(_0x2e77cc[_0x4f9aac(0x1bc)])}};}default:{return{[_0x2e77cc[_0x4f9aac(0x1b0)]]:{[_0x5ac477]:encodeInternalDataType(_0x2e77cc['operands'][0x0])}};}}}[a41_0x3a94f2(0x1c5)](_0x52f93a){const _0x2a49e3=a41_0x3a94f2,_0x3e5ea3=flattenQueryObject(_0x52f93a);for(const _0x5dc8cd of Object[_0x2a49e3(0x1b1)](_0x3e5ea3)){const _0x51fd1e=_0x3e5ea3[_0x5dc8cd];if(isLogicCommand(_0x51fd1e)){_0x3e5ea3[_0x5dc8cd]=_0x51fd1e['_setFieldName'](_0x5dc8cd);const _0x53783f=this['encodeLogicCommand'](_0x3e5ea3[_0x5dc8cd]);this[_0x2a49e3(0x1b7)](_0x3e5ea3,_0x53783f,_0x5dc8cd);}else{if(isComparisonCommand(_0x51fd1e)){_0x3e5ea3[_0x5dc8cd]=_0x51fd1e['_setFieldName'](_0x5dc8cd);const _0x35fefa=this[_0x2a49e3(0x1ac)](_0x3e5ea3[_0x5dc8cd]);this[_0x2a49e3(0x1b7)](_0x3e5ea3,_0x35fefa,_0x5dc8cd);}else isConversionRequired(_0x51fd1e)&&(_0x3e5ea3[_0x5dc8cd]=encodeInternalDataType(_0x51fd1e));}}return _0x3e5ea3;}['mergeConditionAfterEncode'](_0x2541ab,_0x5700c4,_0x3dc671){const _0x5f1154=a41_0x3a94f2;!_0x5700c4[_0x3dc671]&&delete _0x2541ab[_0x3dc671];for(const _0x570a19 in _0x5700c4){if(_0x2541ab[_0x570a19]){if(isArray(_0x2541ab[_0x570a19]))_0x2541ab[_0x570a19]=[..._0x2541ab[_0x570a19],..._0x5700c4[_0x570a19]];else isObject(_0x2541ab[_0x570a19])?isObject(_0x5700c4[_0x570a19])?Object[_0x5f1154(0x1b4)](_0x2541ab,_0x5700c4):_0x2541ab[_0x570a19]=_0x5700c4[_0x570a19]:_0x2541ab[_0x570a19]=_0x5700c4[_0x570a19];}else _0x2541ab[_0x570a19]=_0x5700c4[_0x570a19];}}}